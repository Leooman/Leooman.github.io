import{_ as s,c as n,o as a,a as l}from"./app.36ba4f36.js";const C=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"Array.prototype.filter(callbackfn[, thisArg])","slug":"array-prototype-filter-callbackfn-thisarg","link":"#array-prototype-filter-callbackfn-thisarg","children":[]}],"relativePath":"js/array.prototype.filter.md"}'),e={name:"js/array.prototype.filter.md"},o=l(`<h2 id="array-prototype-filter-callbackfn-thisarg" tabindex="-1">Array.prototype.filter(callbackfn[, thisArg]) <a class="header-anchor" href="#array-prototype-filter-callbackfn-thisarg" aria-hidden="true">#</a></h2><p><em>callbackfn</em> should be a function that accepts three arguments and returns a value that is coercible to the Boolean value <strong>true</strong> or <strong>false</strong>. <strong>filter</strong> calls <em>callbackfn</em> once for each element in the array, in ascending order, and constructs a new array of all the values for which <em>callbackfn</em> returns <strong>true</strong>. <em>callbackfn</em> is called only for elements of the array which actually exist; it is not called for missing elements of the array.</p><p>If a <em>thisArg</em> parameter is provided, it will be used as the <strong>this</strong> value for each invocation of <em>callbackfn</em>. If it is not provided, <strong>undefined</strong> is used instead.</p><p><em>callbackfn</em> is called with three arguments: the value of the element, the index of the element, and the object being traversed.</p><p><strong>filter</strong> does not directly mutate the object on which it is called but the object may be mutated by the calls to <em>callbackfn</em>.</p><p>The range of elements processed by <strong>filter</strong> is set before the first call to <em>callbackfn</em>. Elements which are appended to the array after the call to <strong>filter</strong> begins will not be visited by <em>callbackfn</em>. If existing elements of the array are changed their value as passed to <em>callbackfn</em> will be the value at the time <strong>filter</strong> visits them; elements that are deleted after the call to <strong>filter</strong> begins and before being visited are not visited.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">When the filter method is called with one or two arguments, the following steps are taken:</span></span>
<span class="line"><span style="color:#A6ACCD;">1. Let O be ? ToObject(this value).</span></span>
<span class="line"><span style="color:#A6ACCD;">2. Let len be ? ToLength(? Get(O, &quot;length&quot;)).</span></span>
<span class="line"><span style="color:#A6ACCD;">3. If IsCallable(callbackfn) is false, throw a TypeError exception.</span></span>
<span class="line"><span style="color:#A6ACCD;">4. If thisArg is present, let T be thisArg; else let T be undefined. </span></span>
<span class="line"><span style="color:#A6ACCD;">5. Let A be ? ArraySpeciesCreate(O, 0).</span></span>
<span class="line"><span style="color:#A6ACCD;">6. Let k be 0.</span></span>
<span class="line"><span style="color:#A6ACCD;">7. Let to be 0.</span></span>
<span class="line"><span style="color:#A6ACCD;">8. Repeat, while k &lt; len</span></span>
<span class="line"><span style="color:#A6ACCD;">	a. Let Pk be ! ToString(k).</span></span>
<span class="line"><span style="color:#A6ACCD;">	b. Let kPresent be ? HasProperty(O, Pk).</span></span>
<span class="line"><span style="color:#A6ACCD;">	c. If kPresent is true, then</span></span>
<span class="line"><span style="color:#A6ACCD;">		i. Let kValue be ? Get(O, Pk).</span></span>
<span class="line"><span style="color:#A6ACCD;">		ii. Let selected be ToBoolean(? Call(callbackfn, T, « kValue, k, O »)).</span></span>
<span class="line"><span style="color:#A6ACCD;">		iii. If selected is true, then</span></span>
<span class="line"><span style="color:#A6ACCD;">			1. Perform ? CreateDataPropertyOrThrow(A, ! ToString(to), kValue).</span></span>
<span class="line"><span style="color:#A6ACCD;">			2. Increase to by 1.</span></span>
<span class="line"><span style="color:#A6ACCD;">	d. Increase k by 1.</span></span>
<span class="line"><span style="color:#A6ACCD;">9. Return A.</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">Array</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">callbackfn</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">thisArg</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 异常处理</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  	</span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Cannot read property &#39;map&#39; of null or undefined</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">callbackfn</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">function</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">callbackfn</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> is not a function</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Object</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">len</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;&gt;&gt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">T</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">thisArg</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">A</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Array</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">len</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">k</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 新增，返回数组的索引</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">to</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">while</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">k</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">len</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">k</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">kValue</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">k</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 新增</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">callbackfn</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">T</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">kValue</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">k</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">A</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">to</span><span style="color:#89DDFF;">++</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">kValue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">k</span><span style="color:#89DDFF;">++</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 新增，修改 length，初始值为 len</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">A</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">to</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">A</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div>`,8),p=[o];function t(r,c,y,F,i,D){return a(),n("div",null,p)}const f=s(e,[["render",t]]);export{C as __pageData,f as default};
